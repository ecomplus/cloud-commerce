---
import type { Categories } from '@cloudcommerce/api/types';
import type CmsHeader from '@@sf/types/cms-header';
import type CmsContacts from '@@sf/types/cms-contacts';
import type { PageContext } from '@@sf/ssr-context';
import { i19buyOnWhatsApp } from '@@i18n';
import { getImage } from '@@sf/ssr/image';
import PitchBar, { Props as PitchBarProps } from '@@sf/components/PitchBar.vue';

export interface Props {
  pageContext: PageContext;
}

const {
  pageContext: {
    apiState,
    settings,
    cms,
  },
} = Astro.props as Props;
const header = cms('header') as CmsHeader &
  { marketing_stripe?: { text: string, link: string } };
const pitchBar: PitchBarProps = { slides: [] };
if (header.pitch_bar) {
  pitchBar.slides = header.pitch_bar;
} else if (header.marketing_stripe) {
  pitchBar.slides = [{
    href: header.marketing_stripe.link,
    html: header.marketing_stripe.text,
  }];
}
---

<Fragment>
  <slot name="pitch-bar">
    {pitchBar.slides.length && <PitchBar {...pitchBar} client:idle />}
  </slot>
</Fragment>

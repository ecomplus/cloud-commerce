---
import loadPageContext, { PageContext } from '../lib/ssr-context';
import PagesLayout from '../lib/layouts/Pages.astro';
import FallbackMain from '../lib/main/Fallback.astro';
import InlineScripts from '../scripts/InlineScripts.astro';

let pageContext: PageContext;
try {
  pageContext = await loadPageContext(Astro);
} catch (err) {
  return err.astroResponse;
}
---

<!DOCTYPE html>
<html lang={pageContext?.lang.replace('_', '-')}>
<PagesLayout pageContext={pageContext}>
  <InlineScripts slot="before-head-end" />
  <FallbackMain pageContext={pageContext} />
</PagesLayout>
</html>
